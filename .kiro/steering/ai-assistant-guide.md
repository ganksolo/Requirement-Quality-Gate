---
inclusion: always
---

# AI Assistant å·¥ä½œæŒ‡å—

> **è¿™æ˜¯ä¸“é—¨ä¸º AI Assistant (Kiro/Cursor) å‡†å¤‡çš„å·¥ä½œæŒ‡å—ã€‚**

## ğŸ¯ ä½ çš„è§’è‰²

ä½ æ˜¯ ReqGate é¡¹ç›®çš„å¼€å‘åŠ©æ‰‹ï¼Œè´Ÿè´£ï¼š
1. ç†è§£é¡¹ç›® Spec
2. æ‰§è¡Œå¼€å‘ä»»åŠ¡
3. ç¼–å†™é«˜è´¨é‡ä»£ç 
4. ç¡®ä¿æµ‹è¯•é€šè¿‡

## ğŸ“š å¿…è¯»æ–‡æ¡£ï¼ˆæŒ‰é¡ºåºï¼‰

### ç¬¬ä¸€æ¬¡æ¥è§¦é¡¹ç›®
1. **START_HERE.md** - é¡¹ç›®å…¥å£ï¼ˆ5 åˆ†é’Ÿï¼‰
2. **.kiro/PROJECT_OVERVIEW.md** - é¡¹ç›®å…¨è²Œï¼ˆ15 åˆ†é’Ÿï¼‰
3. **SPEC_GUIDE.md** - Spec ä½¿ç”¨æŒ‡å—ï¼ˆ10 åˆ†é’Ÿï¼‰

### å¼€å§‹å·¥ä½œå‰
1. **.kiro/steering/development-workflow.md** - å¼€å‘æµç¨‹
2. **.kiro/steering/schema-driven-rules.md** - Schema è§„åˆ™
3. **.kiro/specs/phase-1-foundation-scoring/requirements.md** - å½“å‰éœ€æ±‚
4. **.kiro/specs/phase-1-foundation-scoring/design.md** - è®¾è®¡æ–‡æ¡£

## ğŸš¦ å·¥ä½œæµç¨‹

### æ ‡å‡†æµç¨‹
```
1. é˜…è¯» requirements.mdï¼ˆç†è§£éœ€æ±‚ï¼‰
   â†“
2. é˜…è¯» design.mdï¼ˆç†è§£è®¾è®¡ï¼‰
   â†“
3. æŸ¥çœ‹ tasks.mdï¼ˆæ‰¾åˆ°å½“å‰ä»»åŠ¡ï¼‰
   â†“
4. å®ç°ä»»åŠ¡ï¼ˆç¼–å†™ä»£ç ï¼‰
   â†“
5. ç¼–å†™æµ‹è¯•ï¼ˆéªŒè¯åŠŸèƒ½ï¼‰
   â†“
6. è¿è¡Œæµ‹è¯•ï¼ˆç¡®ä¿é€šè¿‡ï¼‰
   â†“
7. æ›´æ–°ä»»åŠ¡çŠ¶æ€ï¼ˆæ ‡è®°å®Œæˆï¼‰
```

### ä»»åŠ¡æ‰§è¡Œæ¨¡å¼

#### å•ä»»åŠ¡æ¨¡å¼ï¼ˆæ¨èï¼‰
```
1. æ‰¾åˆ°ç¬¬ä¸€ä¸ªæœªå®Œæˆçš„ä»»åŠ¡ [ ]
2. å®ç°è¯¥ä»»åŠ¡
3. è¿è¡Œæµ‹è¯•
4. æ ‡è®°ä¸ºå®Œæˆ [x]
5. åœæ­¢ï¼Œç­‰å¾… review
```

#### æ‰¹é‡æ¨¡å¼
```
1. æ ‡è®°æ‰€æœ‰æœªå®Œæˆä»»åŠ¡ä¸º [~] (queued)
2. æŒ‰é¡ºåºæ‰§è¡Œæ¯ä¸ªä»»åŠ¡
3. é‡åˆ°é”™è¯¯ç«‹å³åœæ­¢
4. æŠ¥å‘Šè¿›åº¦
```

## ğŸ“‹ å½“å‰ä»»åŠ¡

### Phase 1: Foundation & Scoring Core

**Spec ä½ç½®**: `.kiro/specs/phase-1-foundation-scoring/`

**ä»»åŠ¡æ¸…å•**: `tasks.md`ï¼ˆ35 ä¸ªä»»åŠ¡ï¼‰

**ä¸‹ä¸€æ­¥**:
1. æ‰“å¼€ `tasks.md`
2. æ‰¾åˆ°ç¬¬ä¸€ä¸ª `[ ]` ä»»åŠ¡
3. æŒ‰ç…§ `design.md` å®ç°
4. æ ‡è®°ä¸º `[x]`

## ğŸ“ æ ¸å¿ƒè§„åˆ™

### 1. Spec-Driven
- **å¿…é¡»å…ˆè¯» Specï¼Œåå†™ä»£ç **
- ä¸ç†è§£éœ€æ±‚æ—¶ï¼Œå…ˆé—®ç”¨æˆ·
- ä¸ç¡®å®šè®¾è®¡æ—¶ï¼Œå‚è€ƒ design.md

### 2. Schema-Driven
- **æ‰€æœ‰æ•°æ®å¿…é¡»ç”¨ Pydantic Schema**
- ç¦æ­¢ä½¿ç”¨ dict ä¼ é€’æ•°æ®
- Schema å®šä¹‰åœ¨ `src/reqgate/schemas/`

### 3. Type Safety
- **æ‰€æœ‰å‡½æ•°å¿…é¡»æœ‰ç±»å‹æ³¨è§£**
- ä½¿ç”¨ `from typing import` å¯¼å…¥ç±»å‹
- è¿è¡Œ `mypy` æ£€æŸ¥ç±»å‹

### 4. Test Everything
- **æ ¸å¿ƒé€»è¾‘å¿…é¡»æœ‰æµ‹è¯•**
- æµ‹è¯•æ–‡ä»¶å‘½åï¼š`test_*.py`
- è¿è¡Œ `pytest tests/ -v`

### 5. Code Quality
- **è¿è¡Œ `ruff check` å’Œ `ruff format`**
- éµå¾ª PEP 8 è§„èŒƒ
- ä¸ç¡¬ç¼–ç é…ç½®

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### ä»£ç è´¨é‡
```bash
# Lint
ruff check src/ tests/

# Format
ruff format src/ tests/

# Type check
mypy src/
```

### æµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_schemas.py -v

# æµ‹è¯•è¦†ç›–ç‡
pytest tests/ --cov=src/reqgate
```

### å¼€å‘
```bash
# å¯åŠ¨æœåŠ¡
uvicorn src.reqgate.app.main:app --reload --port 8000

# è®¿é—®å¥åº·æ£€æŸ¥
curl http://localhost:8000/health
```

## ğŸ“ ä»£ç æ¨¡æ¿

### Schema å®šä¹‰
```python
from pydantic import BaseModel, Field
from typing import Literal, Optional, List

class MySchema(BaseModel):
    """Schema æè¿°"""
    
    required_field: str = Field(..., description="å­—æ®µè¯´æ˜")
    optional_field: Optional[str] = None
    enum_field: Literal["A", "B", "C"] = "A"
    
    class Config:
        json_schema_extra = {
            "example": {
                "required_field": "value",
                "enum_field": "A"
            }
        }
```

### å‡½æ•°å®šä¹‰
```python
def my_function(input: InputSchema) -> OutputSchema:
    """
    å‡½æ•°æè¿°
    
    Args:
        input: è¾“å…¥è¯´æ˜
    
    Returns:
        è¾“å‡ºè¯´æ˜
    
    Raises:
        ValueError: é”™è¯¯è¯´æ˜
    """
    # å®ç°
    return OutputSchema(...)
```

### æµ‹è¯•å®šä¹‰
```python
import pytest
from pydantic import ValidationError

def test_my_schema_valid():
    """æµ‹è¯•åˆæ³•è¾“å…¥"""
    schema = MySchema(required_field="value")
    assert schema.required_field == "value"

def test_my_schema_invalid():
    """æµ‹è¯•éæ³•è¾“å…¥"""
    with pytest.raises(ValidationError):
        MySchema(required_field="")  # ç©ºå­—ç¬¦ä¸²
```

## âš ï¸ å¸¸è§é”™è¯¯

### âŒ é”™è¯¯åšæ³•
```python
# 1. ä½¿ç”¨ dict
def process(data: dict) -> dict:
    return {"result": data["value"]}

# 2. æ²¡æœ‰ç±»å‹æ³¨è§£
def calculate(x, y):
    return x + y

# 3. ç¡¬ç¼–ç é…ç½®
API_KEY = "sk-xxx"

# 4. ä¸å¤„ç†å¼‚å¸¸
result = risky_operation()
```

### âœ… æ­£ç¡®åšæ³•
```python
# 1. ä½¿ç”¨ Schema
def process(data: InputSchema) -> OutputSchema:
    return OutputSchema(result=data.value)

# 2. ç±»å‹æ³¨è§£
def calculate(x: int, y: int) -> int:
    return x + y

# 3. é…ç½®ä»ç¯å¢ƒå˜é‡
settings = get_settings()
api_key = settings.openai_api_key

# 4. å¤„ç†å¼‚å¸¸
try:
    result = risky_operation()
except SpecificError as e:
    logger.error(f"Error: {e}")
    raise
```

## ğŸ¯ Phase 1 é‡ç‚¹

### å½“å‰ Phase
- **Phase 1**: Foundation & Scoring Core
- **çŠ¶æ€**: Spec å·²åˆ›å»ºï¼Œå¾…å®æ–½
- **ä»»åŠ¡æ•°**: 35 ä¸ªï¼ˆ32 å¿…éœ€ + 3 å¯é€‰ï¼‰

### å…³é”®ç»„ä»¶
1. **Schemas**: RequirementPacket, TicketScoreReport
2. **Scoring Agent**: LLM-based scoring
3. **Hard Gate**: Decision logic
4. **Rubric**: YAML configuration

### ä¸åŒ…å«çš„å†…å®¹ï¼ˆPhase 2+ï¼‰
- âŒ Structuring Agent
- âŒ LangGraph workflow
- âŒ FastAPI routes (é™¤äº† /health)
- âŒ Jira/n8n integration

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

### ä½•æ—¶åœæ­¢å¹¶è¯¢é—®ç”¨æˆ·

1. **Spec ä¸æ¸…æ¥š**
   - éœ€æ±‚æè¿°æ¨¡ç³Š
   - è®¾è®¡ç»†èŠ‚ç¼ºå¤±
   - éªŒæ”¶æ ‡å‡†ä¸æ˜ç¡®

2. **æŠ€æœ¯å†³ç­–**
   - éœ€è¦é€‰æ‹©æŠ€æœ¯æ–¹æ¡ˆ
   - éœ€è¦ä¿®æ”¹æ¶æ„
   - éœ€è¦æ·»åŠ æ–°ä¾èµ–

3. **æµ‹è¯•å¤±è´¥**
   - è¿ç»­ 3 æ¬¡å¤±è´¥
   - ä¸ç†è§£å¤±è´¥åŸå› 
   - éœ€è¦ä¿®æ”¹ Spec

4. **éœ€è¦å‡­è¯**
   - API Key
   - æ•°æ®åº“è¿æ¥
   - å…¶ä»–æ•æ„Ÿä¿¡æ¯

### é—®é¢˜æ¨¡æ¿
```
æˆ‘åœ¨æ‰§è¡Œ Task X.X æ—¶é‡åˆ°é—®é¢˜ï¼š

**é—®é¢˜æè¿°**:
[å…·ä½“æè¿°é—®é¢˜]

**å·²å°è¯•çš„æ–¹æ³•**:
1. [æ–¹æ³• 1]
2. [æ–¹æ³• 2]

**éœ€è¦çš„å¸®åŠ©**:
[å…·ä½“éœ€è¦ä»€ä¹ˆå¸®åŠ©]
```

## ğŸ“Š è¿›åº¦æŠ¥å‘Š

### å®Œæˆä»»åŠ¡å
```
âœ… Task X.X å·²å®Œæˆ

**å®ç°å†…å®¹**:
- [å…·ä½“å®ç°äº†ä»€ä¹ˆ]

**æµ‹è¯•ç»“æœ**:
- [æµ‹è¯•æ˜¯å¦é€šè¿‡]

**ä¸‹ä¸€æ­¥**:
- [å»ºè®®ä¸‹ä¸€æ­¥åšä»€ä¹ˆ]
```

### é‡åˆ°é”™è¯¯æ—¶
```
âŒ Task X.X æ‰§è¡Œå¤±è´¥

**é”™è¯¯ä¿¡æ¯**:
[å…·ä½“é”™è¯¯]

**å·²å°è¯•**:
- [å°è¯• 1]
- [å°è¯• 2]

**éœ€è¦å¸®åŠ©**:
[éœ€è¦ä»€ä¹ˆå¸®åŠ©]
```

## ğŸ‰ æˆåŠŸæ ‡å‡†

### ä»»åŠ¡å®Œæˆæ ‡å‡†
- [ ] ä»£ç å®ç°ç¬¦åˆ design.md
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] ä»£ç è´¨é‡æ£€æŸ¥é€šè¿‡ï¼ˆruff + mypyï¼‰
- [ ] æ›´æ–°äº†ä»»åŠ¡çŠ¶æ€
- [ ] æ·»åŠ äº†å¿…è¦çš„æ³¨é‡Š

### Phase 1 å®Œæˆæ ‡å‡†
- [ ] æ‰€æœ‰ REQUIRED ä»»åŠ¡å®Œæˆ
- [ ] Milestone T1 éªŒæ”¶é€šè¿‡
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] æ–‡æ¡£æ›´æ–°å®Œæ•´

## ğŸ”„ å·¥ä½œå¾ªç¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. è¯»å– tasks.md                   â”‚
â”‚     æ‰¾åˆ°æœªå®Œæˆä»»åŠ¡                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. é˜…è¯» design.md                  â”‚
â”‚     ç†è§£è®¾è®¡å’Œå®ç°æ–¹å¼               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. ç¼–å†™ä»£ç                         â”‚
â”‚     éµå¾ª Schema-Driven åŸåˆ™         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. ç¼–å†™æµ‹è¯•                        â”‚
â”‚     ç¡®ä¿åŠŸèƒ½æ­£ç¡®                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. è¿è¡Œæµ‹è¯•                        â”‚
â”‚     pytest + ruff + mypy            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. æ›´æ–°ä»»åŠ¡çŠ¶æ€                    â”‚
â”‚     [ ] â†’ [x]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  7. æŠ¥å‘Šè¿›åº¦                        â”‚
â”‚     å‘ŠçŸ¥ç”¨æˆ·å®Œæˆæƒ…å†µ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Œ è®°ä½

1. **Spec First, Code Second**
2. **Schema is Law**
3. **Type Safety Always**
4. **Test Everything**
5. **Quality over Speed**

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿå¼€å§‹æ‰§è¡Œ Phase 1 ä»»åŠ¡å§ï¼** ğŸš€

Last Updated: 2025-01-21
Current Phase: Phase 1 (Foundation & Scoring Core)
